<!DOCTYPE html><!DOCTYPE html><!DOCTYPE html><!DOCTYPE html>

<html lang="es">

<head><html lang="es">

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0"><head><html lang="es"><html lang="es">

  <title>DocuFlow - Gestión de Archivos</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <meta charset="UTF-8">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <link rel="stylesheet" href="../../shared/styles/styles.css">  <meta name="viewport" content="width=device-width, initial-scale=1.0"><head><head>

  <link rel="stylesheet" href="upload.css">

</head>  <title>DocuFlow - Gestión de Archivos</title>

<body>

  <!-- Navbar -->  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <meta charset="UTF-8">  <meta charset="UTF-8">

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">

    <div class="container-fluid">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">

        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">  <link rel="stylesheet" href="../../shared/styles/styles.css">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <meta name="viewport" content="width=device-width, initial-scale=1.0">

        DocuFlow

      </a>  <link rel="stylesheet" href="upload.css">

      

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"></head>  <title>DocuFlow - Subir Archivos</title>  <title>DocuFlow - Gestión de Archivos</title>

        <span class="navbar-toggler-icon"></span>

      </button><body>

      

      <div class="collapse navbar-collapse" id="navbarNav">  <!-- Navbar de navegación -->  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <ul class="navbar-nav me-auto">

          <li class="nav-item">  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="position: sticky; top: 0; z-index: 1000;">

            <a class="nav-link" href="../dashboard/dashboard.html">

              <i class="bi bi-house-door me-1"></i>Dashboard    <div class="container-fluid">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

            </a>

          </li>      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">

          <li class="nav-item">

            <a class="nav-link active" href="upload.html">        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">  <link rel="stylesheet" href="../../shared/styles/styles.css">  <link rel="stylesheet" href="../../shared/styles/styles.css">

              <i class="bi bi-cloud-upload me-1"></i>Archivos

            </a>        DocuFlow

          </li>

          <li class="nav-item">      </a>  <link rel="stylesheet" href="upload.css">  <link rel="stylesheet" href="upload.css">

            <a class="nav-link" href="../comments/comments.html">

              <i class="bi bi-chat-dots me-1"></i>Comentarios      

            </a>

          </li>      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"></head></head>

          <li class="nav-item">

            <a class="nav-link" href="../logs/logs.html">        <span class="navbar-toggler-icon"></span>

              <i class="bi bi-journal-text me-1"></i>Logs

            </a>      </button><body><body>

          </li>

          <li class="nav-item">      

            <a class="nav-link" href="../permissions/permissions.html">

              <i class="bi bi-shield-check me-1"></i>Permisos      <div class="collapse navbar-collapse" id="navbarNav">  <!-- Navbar de navegación -->  <!-- Navbar Container -->

            </a>

          </li>        <ul class="navbar-nav me-auto">

        </ul>

                  <li class="nav-item">  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="position: sticky; top: 0; z-index: 1000;">  <div id="navbar-container" class="container-fluid mt-4 mb-4"></div>

        <ul class="navbar-nav">

          <li class="nav-item dropdown">            <a class="nav-link" href="../dashboard/dashboard.html">

            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">

              <i class="bi bi-person-circle me-1"></i>              <i class="bi bi-house-door me-1"></i>Dashboard    <div class="container-fluid">

              <span id="nav-username">Usuario</span>

            </a>            </a>

            <ul class="dropdown-menu dropdown-menu-end">

              <li><a class="dropdown-item" href="../profile/profile.html">          </li>      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">  <div class="files-container">

                <i class="bi bi-person me-2"></i>Mi Perfil

              </a></li>          <li class="nav-item">

              <li><hr class="dropdown-divider"></li>

              <li><a class="dropdown-item" href="#" onclick="authService.logout()">            <a class="nav-link active" href="upload.html">        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">    <!-- Header Section -->

                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión

              </a></li>              <i class="bi bi-cloud-upload me-1"></i>Subir Archivos

            </ul>

          </li>            </a>        DocuFlow    <div class="files-header card-modern mb-4">

        </ul>

      </div>          </li>

    </div>

  </nav>          <li class="nav-item">      </a>      <div class="d-flex justify-content-between align-items-center">



  <div class="container-fluid p-4">            <a class="nav-link" href="../comments/comments.html">

    <!-- Header -->

    <div class="row mb-4">              <i class="bi bi-chat-dots me-1"></i>Comentarios              <div class="d-flex align-items-center gap-3">

      <div class="col-12">

        <div class="card bg-primary text-white">            </a>

          <div class="card-body">

            <div class="d-flex justify-content-between align-items-center">          </li>      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">          <div class="header-icon">

              <div>

                <h4 class="mb-1">Gestión de Archivos</h4>          <li class="nav-item">

                <p class="mb-0">Sube, descarga y administra tus documentos</p>

              </div>            <a class="nav-link" href="../logs/logs.html">        <span class="navbar-toggler-icon"></span>            <i class="bi bi-cloud-arrow-up"></i>

              <button class="btn btn-light" onclick="showUploadModal()">

                <i class="bi bi-plus-lg me-2"></i>Subir Archivo              <i class="bi bi-journal-text me-1"></i>Logs

              </button>

            </div>            </a>      </button>          </div>

          </div>

        </div>          </li>

      </div>

    </div>          <li class="nav-item">                <div>



    <div class="row">            <a class="nav-link" href="../permissions/permissions.html">

      <!-- Panel principal -->

      <div class="col-lg-9">              <i class="bi bi-shield-check me-1"></i>Permisos      <div class="collapse navbar-collapse" id="navbarNav">            <h2 class="mb-1 text-primary">Gestión de Archivos</h2>

        <!-- Filtros -->

        <div class="card mb-4">            </a>

          <div class="card-body">

            <div class="row g-3">          </li>        <ul class="navbar-nav me-auto">            <p class="text-muted mb-0">Sube, organiza y gestiona tus documentos</p>

              <div class="col-md-4">

                <div class="input-group">          <li class="nav-item">

                  <span class="input-group-text"><i class="bi bi-search"></i></span>

                  <input type="text" class="form-control" id="searchFiles" placeholder="Buscar archivos...">            <a class="nav-link" href="../export/export.html">          <li class="nav-item">          </div>

                </div>

              </div>              <i class="bi bi-download me-1"></i>Exportar

              <div class="col-md-2">

                <select class="form-select" id="typeFilter">            </a>            <a class="nav-link" href="../dashboard/dashboard.html">        </div>

                  <option value="">Tipo</option>

                  <option value="pdf">PDF</option>          </li>

                  <option value="doc">Word</option>

                  <option value="img">Imagen</option>        </ul>              <i class="bi bi-house-door me-1"></i>Dashboard        <div class="files-stats">

                  <option value="txt">Texto</option>

                </select>        

              </div>

              <div class="col-md-2">        <ul class="navbar-nav">            </a>          <div class="stat-item">

                <select class="form-select" id="sizeFilter">

                  <option value="">Tamaño</option>          <li class="nav-item dropdown">

                  <option value="small">< 1MB</option>

                  <option value="medium">1-10MB</option>            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">          </li>            <i class="bi bi-files text-primary"></i>

                  <option value="large">> 10MB</option>

                </select>              <i class="bi bi-person-circle me-1"></i>

              </div>

              <div class="col-md-2">              <span id="nav-username">Usuario</span>          <li class="nav-item">            <span id="total-files">0</span>

                <select class="form-select" id="dateFilter">

                  <option value="">Fecha</option>            </a>

                  <option value="today">Hoy</option>

                  <option value="week">Esta semana</option>            <ul class="dropdown-menu dropdown-menu-end">            <a class="nav-link active" href="upload.html">            <small>archivos</small>

                  <option value="month">Este mes</option>

                </select>              <li><a class="dropdown-item" href="../profile/profile.html">

              </div>

              <div class="col-md-2">                <i class="bi bi-person me-2"></i>Mi Perfil              <i class="bi bi-cloud-upload me-1"></i>Subir Archivos          </div>

                <button class="btn btn-outline-primary w-100" onclick="clearFilters()">

                  <i class="bi bi-x-circle me-1"></i>Limpiar              </a></li>

                </button>

              </div>              <li><hr class="dropdown-divider"></li>            </a>          <div class="stat-item">

            </div>

          </div>              <li><a class="dropdown-item" href="#" onclick="authService.logout()">

        </div>

                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión          </li>            <i class="bi bi-hdd text-success"></i>

        <!-- Lista de archivos -->

        <div class="card">              </a></li>

          <div class="card-header d-flex justify-content-between align-items-center">

            <h6 class="mb-0">Mis Archivos</h6>            </ul>          <li class="nav-item">            <span id="total-size">0 MB</span>

            <div class="d-flex gap-2">

              <span class="badge bg-primary" id="files-count">0 archivos</span>          </li>

              <button class="btn btn-sm btn-outline-primary" onclick="refreshFiles()">

                <i class="bi bi-arrow-clockwise"></i>        </ul>            <a class="nav-link" href="../comments/comments.html">            <small>usado</small>

              </button>

            </div>      </div>

          </div>

          <div class="card-body p-0">    </div>              <i class="bi bi-chat-dots me-1"></i>Comentarios          </div>

            <div class="table-responsive">

              <table class="table table-hover mb-0">  </nav>

                <thead class="table-light">

                  <tr>            </a>          <div class="stat-item">

                    <th class="ps-3">Archivo</th>

                    <th>Tamaño</th>  <div class="container-fluid mt-4">

                    <th>Fecha</th>

                    <th>Usuario</th>    <div class="row">          </li>            <i class="bi bi-cloud text-info"></i>

                    <th width="120">Acciones</th>

                  </tr>      <!-- Panel principal de archivos -->

                </thead>

                <tbody id="files-table">      <div class="col-lg-9">          <li class="nav-item">            <span id="gcs-usage">0 MB / 10 GB</span>

                  <tr>

                    <td colspan="5" class="text-center py-5">        <div class="card shadow-sm">

                      <div class="spinner-border text-primary" role="status">

                        <span class="visually-hidden">Cargando...</span>          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">            <a class="nav-link" href="../logs/logs.html">            <small>GCS</small>

                      </div>

                      <p class="mt-2 text-muted mb-0">Cargando archivos...</p>            <h5 class="mb-0">

                    </td>

                  </tr>              <i class="bi bi-folder2-open me-2"></i>              <i class="bi bi-journal-text me-1"></i>Logs          </div>

                </tbody>

              </table>              Gestión de Archivos

            </div>

          </div>            </h5>            </a>          <div class="stat-item">

        </div>

      </div>            <div class="d-flex gap-2">



      <!-- Sidebar -->              <button class="btn btn-light btn-sm" onclick="refreshFiles()">          </li>            <i class="bi bi-exclamation-triangle text-warning"></i>

      <div class="col-lg-3">

        <!-- Estadísticas -->                <i class="bi bi-arrow-clockwise"></i>

        <div class="card mb-4">

          <div class="card-header bg-info text-white">              </button>          <li class="nav-item">            <span id="orphan-files">0</span>

            <h6 class="mb-0"><i class="bi bi-bar-chart me-2"></i>Estadísticas</h6>

          </div>              <button class="btn btn-success btn-sm" onclick="showUploadModal()">

          <div class="card-body">

            <div class="row text-center">                <i class="bi bi-plus-lg me-1"></i>Subir Archivo            <a class="nav-link" href="../permissions/permissions.html">            <small>huérfanos</small>

              <div class="col-6 border-end">

                <h4 class="text-primary mb-1" id="total-files">156</h4>              </button>

                <small class="text-muted">Total</small>

              </div>            </div>              <i class="bi bi-shield-check me-1"></i>Permisos          </div>

              <div class="col-6">

                <h4 class="text-success mb-1" id="uploaded-today">8</h4>          </div>

                <small class="text-muted">Hoy</small>

              </div>          <div class="card-body">            </a>        </div>

            </div>

            <hr>            <!-- Filtros y búsqueda -->

            <div class="mb-3">

              <div class="d-flex justify-content-between mb-1">            <div class="row mb-3">          </li>      </div>

                <small>Espacio usado</small>

                <small id="storage-text">2.4 GB / 10 GB</small>              <div class="col-md-6">

              </div>

              <div class="progress" style="height: 8px;">                <div class="input-group">          <li class="nav-item">    </div>

                <div class="progress-bar bg-warning" style="width: 24%" id="storage-bar"></div>

              </div>                  <span class="input-group-text"><i class="bi bi-search"></i></span>

            </div>

            <div class="text-center">                  <input type="text" class="form-control" id="searchInput" placeholder="Buscar archivos...">            <a class="nav-link" href="../export/export.html">

              <button class="btn btn-outline-primary btn-sm" onclick="showStorageDetails()">

                Ver detalles                </div>

              </button>

            </div>              </div>              <i class="bi bi-download me-1"></i>Exportar    <div class="row">

          </div>

        </div>              <div class="col-md-3">



        <!-- Archivos recientes -->                <select class="form-select" id="typeFilter">            </a>      <!-- Upload Section -->

        <div class="card">

          <div class="card-header bg-success text-white">                  <option value="">Todos los tipos</option>

            <h6 class="mb-0"><i class="bi bi-clock me-2"></i>Recientes</h6>

          </div>                  <option value="pdf">PDF</option>          </li>      <div class="col-lg-4">

          <div class="card-body" id="recent-files">

            <div class="text-center">                  <option value="doc">Word</option>

              <div class="spinner-border spinner-border-sm text-success" role="status"></div>

              <p class="mt-2 text-muted small mb-0">Cargando...</p>                  <option value="txt">Texto</option>        </ul>        <div class="upload-section card-modern">

            </div>

          </div>                  <option value="img">Imagen</option>

        </div>

      </div>                </select>                  <div class="upload-header mb-3">

    </div>

  </div>              </div>



  <!-- Modal Upload -->              <div class="col-md-3">        <ul class="navbar-nav">            <h5><i class="bi bi-cloud-upload me-2"></i>Subir Archivos</h5>

  <div class="modal fade" id="uploadModal" tabindex="-1">

    <div class="modal-dialog modal-lg">                <select class="form-select" id="dateFilter">

      <div class="modal-content">

        <div class="modal-header">                  <option value="">Todas las fechas</option>          <li class="nav-item dropdown">            <small class="text-muted">Máximo 10MB por archivo</small>

          <h5 class="modal-title"><i class="bi bi-cloud-upload me-2"></i>Subir Archivos</h5>

          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>                  <option value="today">Hoy</option>

        </div>

        <div class="modal-body">                  <option value="week">Esta semana</option>            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">          </div>

          <!-- Zona de arrastrar -->

          <div class="upload-zone border border-2 border-dashed border-primary rounded p-4 text-center mb-3" id="dropzone">                  <option value="month">Este mes</option>

            <i class="bi bi-cloud-upload display-1 text-primary mb-3"></i>

            <h5>Arrastra archivos aquí</h5>                </select>              <i class="bi bi-person-circle me-1"></i>

            <p class="text-muted">o haz clic para seleccionar</p>

            <input type="file" id="fileInput" multiple class="d-none" accept=".pdf,.doc,.docx,.txt,.jpg,.png,.xlsx,.pptx">              </div>

            <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">

              Seleccionar Archivos            </div>              <span id="nav-username">Usuario</span>          <!-- Drag & Drop Area -->

            </button>

          </div>

          

          <!-- Lista de archivos seleccionados -->            <!-- Lista de archivos -->            </a>          <div class="drop-zone" id="dropZone">

          <div id="selectedFiles" class="d-none">

            <h6>Archivos seleccionados:</h6>            <div class="table-responsive">

            <div id="filesList"></div>

          </div>              <table class="table table-hover">            <ul class="dropdown-menu dropdown-menu-end">            <div class="drop-zone-content">

          

          <!-- Progreso de subida -->                <thead class="table-light">

          <div id="uploadProgress" class="d-none">

            <h6>Subiendo archivos:</h6>                  <tr>              <li><a class="dropdown-item" href="../profile/profile.html">              <i class="bi bi-cloud-upload display-4 text-primary mb-3"></i>

            <div class="progress mb-2">

              <div class="progress-bar" id="progressBar" style="width: 0%"></div>                    <th><i class="bi bi-file-text me-1"></i>Nombre</th>

            </div>

            <div id="uploadStatus"></div>                    <th><i class="bi bi-hdd me-1"></i>Tamaño</th>                <i class="bi bi-person me-2"></i>Mi Perfil              <p class="mb-2">Arrastra archivos aquí o</p>

          </div>

        </div>                    <th><i class="bi bi-calendar me-1"></i>Fecha</th>

        <div class="modal-footer">

          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>                    <th><i class="bi bi-person me-1"></i>Usuario</th>              </a></li>              <button type="button" class="btn btn-modern btn-outline-modern" onclick="document.getElementById('fileInput').click()">

          <button type="button" class="btn btn-primary" id="uploadBtn" onclick="startUpload()" disabled>

            <i class="bi bi-upload me-1"></i>Subir Archivos                    <th><i class="bi bi-gear me-1"></i>Acciones</th>

          </button>

        </div>                  </tr>              <li><hr class="dropdown-divider"></li>                Seleccionar Archivos

      </div>

    </div>                </thead>

  </div>

                <tbody id="files-table-body">              <li><a class="dropdown-item" href="#" onclick="authService.logout()">              </button>

  <!-- Modal Confirmar Eliminación -->

  <div class="modal fade" id="deleteModal" tabindex="-1">                  <tr>

    <div class="modal-dialog">

      <div class="modal-content">                    <td colspan="5" class="text-center py-4">                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión            </div>

        <div class="modal-header">

          <h5 class="modal-title text-danger">                      <div class="spinner-border text-primary" role="status">

            <i class="bi bi-exclamation-triangle me-2"></i>Confirmar Eliminación

          </h5>                        <span class="visually-hidden">Cargando...</span>              </a></li>          </div>

          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

        </div>                      </div>

        <div class="modal-body">

          <p>¿Estás seguro de que deseas eliminar este archivo?</p>                      <p class="mt-2 text-muted">Cargando archivos...</p>            </ul>

          <div class="alert alert-warning">

            <i class="bi bi-info-circle me-2"></i>                    </td>

            Esta acción no se puede deshacer.

          </div>                  </tr>          </li>          <!-- File Input -->

          <div id="fileToDelete"></div>

        </div>                </tbody>

        <div class="modal-footer">

          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>              </table>        </ul>          <input type="file" id="fileInput" multiple hidden accept="*/*">

          <button type="button" class="btn btn-danger" id="confirmDeleteBtn">

            <i class="bi bi-trash me-1"></i>Eliminar            </div>

          </button>

        </div>      </div>

      </div>

    </div>            <!-- Paginación -->

  </div>

            <nav aria-label="Paginación de archivos">    </div>          <!-- Upload Form -->

  <!-- Scripts -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>              <ul class="pagination justify-content-center" id="pagination">

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>

  <script type="module" src="uploadController.js"></script>                <!-- Generado dinámicamente -->  </nav>          <form id="uploadForm" class="mt-3" style="display: none;">

</body>

</html>              </ul>

            </nav>            <div class="selected-files mb-3" id="selectedFiles"></div>

          </div>

        </div>  <div class="container mt-4">            <button type="submit" id="uploadBtn" class="btn btn-modern btn-primary-modern w-100">

      </div>

    <div class="row">              <span class="btn-text">

      <!-- Panel lateral -->

      <div class="col-lg-3">      <!-- Panel de subida -->                <i class="bi bi-cloud-upload me-2"></i>

        <!-- Estadísticas -->

        <div class="card shadow-sm mb-3">      <div class="col-lg-8">                Subir Archivos

          <div class="card-header bg-info text-white">

            <h6 class="mb-0">        <div class="card">              </span>

              <i class="bi bi-graph-up me-2"></i>Estadísticas

            </h6>          <div class="card-header">              <span class="btn-loading d-none">

          </div>

          <div class="card-body">            <h5 class="mb-0">                <span class="spinner-border spinner-border-sm me-2"></span>

            <div class="text-center mb-3">

              <h4 class="text-primary" id="total-files">156</h4>              <i class="bi bi-cloud-upload text-primary me-2"></i>                Subiendo...

              <p class="text-muted mb-0">Total de archivos</p>

            </div>              Subir Documentos              </span>

            <div class="text-center mb-3">

              <h4 class="text-success" id="files-today">8</h4>            </h5>            </button>

              <p class="text-muted mb-0">Subidos hoy</p>

            </div>          </div>          </form>

            <div class="text-center">

              <h4 class="text-warning" id="total-size">2.4 GB</h4>          <div class="card-body">

              <p class="text-muted mb-0">Espacio usado</p>

            </div>            <!-- Zona de arrastrar y soltar -->          <!-- Progress Bar -->

          </div>

        </div>            <div class="upload-zone" id="upload-zone">          <div class="upload-progress mt-3" id="uploadProgress" style="display: none;">



        <!-- Espacio de almacenamiento -->              <div class="text-center p-5">            <div class="d-flex justify-content-between align-items-center mb-2">

        <div class="card shadow-sm mb-3">

          <div class="card-header bg-warning text-dark">                <i class="bi bi-cloud-upload display-1 text-muted"></i>              <small class="text-muted">Subiendo archivo...</small>

            <h6 class="mb-0">

              <i class="bi bi-hdd me-2"></i>Almacenamiento                <h4 class="mt-3">Arrastra archivos aquí</h4>              <small class="text-muted" id="progressText">0%</small>

            </h6>

          </div>                <p class="text-muted">o haz clic para seleccionar archivos</p>            </div>

          <div class="card-body">

            <div class="progress mb-2" style="height: 10px;">                <button class="btn btn-primary" onclick="selectFiles()">            <div class="progress">

              <div class="progress-bar bg-warning" style="width: 24%"></div>

            </div>                  <i class="bi bi-folder me-1"></i>Seleccionar Archivos              <div class="progress-bar progress-bar-striped progress-bar-animated" 

            <small class="text-muted">2.4 GB de 10 GB usados (24%)</small>

            <div class="mt-3">                </button>                   id="progressBar" 

              <div class="d-flex justify-content-between">

                <span>PDF:</span>                <input type="file" id="file-input" multiple accept=".pdf,.doc,.docx,.txt,.jpg,.png,.xlsx,.pptx" style="display: none;">                   role="progressbar" 

                <span>1.2 GB</span>

              </div>              </div>                   style="width: 0%"></div>

              <div class="d-flex justify-content-between">

                <span>Imágenes:</span>            </div>            </div>

                <span>0.8 GB</span>

              </div>          </div>

              <div class="d-flex justify-content-between">

                <span>Documentos:</span>            <!-- Lista de archivos seleccionados -->

                <span>0.4 GB</span>

              </div>            <div id="file-list" class="mt-4" style="display: none;">          <!-- Quick Actions -->

            </div>

          </div>              <h6>Archivos Seleccionados:</h6>          <div class="quick-actions mt-4">

        </div>

              <div id="selected-files"></div>            <h6>Acciones Rápidas</h6>

        <!-- Archivos recientes -->

        <div class="card shadow-sm">              <div class="d-flex gap-2 mt-3">            <div class="d-grid gap-2">

          <div class="card-header bg-success text-white">

            <h6 class="mb-0">                <button class="btn btn-success" onclick="uploadFiles()">              <button class="btn btn-modern btn-outline-modern btn-sm" onclick="window.uploadController?.refreshFileList?.()">

              <i class="bi bi-clock me-2"></i>Recientes

            </h6>                  <i class="bi bi-upload me-1"></i>Subir Archivos                <i class="bi bi-arrow-clockwise me-2"></i>Actualizar Lista

          </div>

          <div class="card-body" id="recent-files-panel">                </button>              </button>

            <div class="text-center">

              <div class="spinner-border spinner-border-sm text-success" role="status">                <button class="btn btn-outline-secondary" onclick="clearFiles()">              <button class="btn btn-modern btn-outline-modern btn-sm" onclick="window.uploadController?.downloadAllSelected?.()">

                <span class="visually-hidden">Cargando...</span>

              </div>                  <i class="bi bi-x me-1"></i>Limpiar                <i class="bi bi-download me-2"></i>Descargar Todo

              <p class="mt-2 text-muted small">Cargando...</p>

            </div>                </button>              </button>

          </div>

        </div>              </div>              <button class="btn btn-modern btn-outline-modern btn-sm" onclick="window.uploadController?.showAdvancedStatsModal?.()">

      </div>

    </div>            </div>                <i class="bi bi-bar-chart me-2"></i>Estadísticas GCS

  </div>

              </button>

  <!-- Modal de subida -->

  <div class="modal fade" id="uploadModal" tabindex="-1">            <!-- Progreso de subida -->              <button class="btn btn-modern btn-outline-modern btn-sm" onclick="window.uploadController?.detectOrphanedFiles?.()">

    <div class="modal-dialog">

      <div class="modal-content">            <div id="upload-progress" class="mt-4" style="display: none;">                <i class="bi bi-search me-2"></i>Detectar Huérfanos

        <div class="modal-header">

          <h5 class="modal-title">              <h6>Progreso de Subida:</h6>              </button>

            <i class="bi bi-cloud-upload me-2"></i>Subir Archivo

          </h5>              <div class="progress mb-2">            </div>

          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

        </div>                <div class="progress-bar" id="progress-bar" role="progressbar" style="width: 0%"></div>          </div>

        <div class="modal-body">

          <div class="upload-zone border border-dashed border-primary rounded p-4 text-center" id="upload-zone">              </div>

            <i class="bi bi-cloud-upload display-4 text-primary"></i>

            <h5 class="mt-3">Arrastra archivos aquí</h5>              <div id="upload-status"></div>          <!-- Storage Monitor -->

            <p class="text-muted">o haz clic para seleccionar</p>

            <input type="file" id="file-input" multiple class="d-none">            </div>          <div class="storage-monitor mt-4">

            <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">

              Seleccionar Archivos          </div>            <h6>Monitor de Almacenamiento</h6>

            </button>

          </div>        </div>            <div class="storage-info">

          <div id="selected-files" class="mt-3"></div>

          <div id="upload-progress" class="mt-3" style="display: none;">      </div>              <div class="d-flex justify-content-between align-items-center mb-2">

            <div class="progress">

              <div class="progress-bar" id="progress-bar" role="progressbar" style="width: 0%"></div>                <small class="text-muted">Uso de Google Cloud Storage</small>

            </div>

            <div id="upload-status" class="mt-2"></div>      <!-- Panel lateral -->                <small class="text-muted" id="storage-usage-percent">0%</small>

          </div>

        </div>      <div class="col-lg-4">              </div>

        <div class="modal-footer">

          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>        <!-- Información de archivos -->              <div class="progress mb-2" style="height: 8px;">

          <button type="button" class="btn btn-primary" id="upload-btn" onclick="uploadFiles()">

            <i class="bi bi-upload me-1"></i>Subir        <div class="card">                <div class="progress-bar bg-success" 

          </button>

        </div>          <div class="card-header">                     id="storage-usage-bar" 

      </div>

    </div>            <h6 class="mb-0">                     style="width: 0%"></div>

  </div>

              <i class="bi bi-info-circle text-info me-2"></i>              </div>

  <!-- Scripts -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>              Información              <div class="row text-center">

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>

  <script type="module" src="uploadController.js"></script>            </h6>                <div class="col-6">

</body>

</html>          </div>                  <small class="text-muted d-block">Usado</small>

          <div class="card-body">                  <span class="fw-bold" id="storage-used">0 MB</span>

            <div class="mb-3">                </div>

              <strong>Formatos Soportados:</strong>                <div class="col-6">

              <div class="mt-2">                  <small class="text-muted d-block">Disponible</small>

                <span class="badge bg-secondary me-1">PDF</span>                  <span class="fw-bold" id="storage-available">10 GB</span>

                <span class="badge bg-secondary me-1">DOC</span>                </div>

                <span class="badge bg-secondary me-1">DOCX</span>              </div>

                <span class="badge bg-secondary me-1">TXT</span>            </div>

                <span class="badge bg-secondary me-1">JPG</span>          </div>

                <span class="badge bg-secondary me-1">PNG</span>        </div>

                <span class="badge bg-secondary me-1">XLSX</span>      </div>

                <span class="badge bg-secondary me-1">PPTX</span>

              </div>      <!-- Files List Section -->

            </div>      <div class="col-lg-8">

            <div class="mb-3">        <div class="files-list card-modern">

              <strong>Tamaño Máximo:</strong>          <div class="files-list-header d-flex justify-content-between align-items-center mb-3">

              <p class="text-muted mb-0">10 MB por archivo</p>            <h5><i class="bi bi-folder2-open me-2"></i>Mis Archivos</h5>

            </div>            <div class="d-flex gap-2">

            <div>              <div class="search-box">

              <strong>Espacio Usado:</strong>                <input type="text" class="form-control form-control-sm" id="searchFiles" placeholder="Buscar archivos...">

              <div class="progress mt-2">              </div>

                <div class="progress-bar bg-info" style="width: 24%"></div>              <div class="view-toggle btn-group" role="group">

              </div>                <button type="button" class="btn btn-outline-secondary btn-sm active" id="listViewButton" data-view="table">

              <small class="text-muted">2.4 GB de 10 GB</small>                  <i class="bi bi-list"></i>

            </div>                </button>

          </div>                <button type="button" class="btn btn-outline-secondary btn-sm" id="gridViewButton" data-view="grid">

        </div>                  <i class="bi bi-grid"></i>

                </button>

        <!-- Archivos recientes -->              </div>

        <div class="card mt-3">            </div>

          <div class="card-header d-flex justify-content-between align-items-center">          </div>

            <h6 class="mb-0">

              <i class="bi bi-clock text-warning me-2"></i>          <!-- Files Table -->

              Archivos Recientes          <div class="table-container" id="tableView">

            </h6>            <div class="table-responsive">

            <button class="btn btn-sm btn-outline-primary" onclick="refreshFiles()">              <table class="table table-hover align-middle" id="filesTable">

              <i class="bi bi-arrow-clockwise"></i>                <thead class="table-light">

            </button>                  <tr>

          </div>                    <th>

          <div class="card-body">                      <input type="checkbox" class="form-check-input" id="selectAll">

            <div id="recent-files">                    </th>

              <div class="text-center">                    <th><i class="bi bi-file-earmark me-1"></i>Nombre</th>

                <div class="spinner-border spinner-border-sm" role="status">                    <th><i class="bi bi-hdd me-1"></i>Tamaño</th>

                  <span class="visually-hidden">Cargando...</span>                    <th><i class="bi bi-calendar me-1"></i>Fecha</th>

                </div>                    <th><i class="bi bi-gear me-1"></i>Acciones</th>

                <p class="mt-2 text-muted small">Cargando archivos...</p>                  </tr>

              </div>                </thead>

            </div>                <tbody id="filesTableBody">

          </div>                  <!-- Los archivos se cargarán aquí -->

        </div>                </tbody>

              </table>

        <!-- Estadísticas -->            </div>

        <div class="card mt-3">            

          <div class="card-header">            <!-- Empty State -->

            <h6 class="mb-0">            <div class="empty-state text-center py-5 d-none" id="emptyState">

              <i class="bi bi-graph-up text-success me-2"></i>              <i class="bi bi-folder-x display-4 text-muted mb-3"></i>

              Estadísticas              <h5 class="text-muted">No hay archivos</h5>

            </h6>              <p class="text-muted">Sube tu primer archivo para comenzar</p>

          </div>            </div>

          <div class="card-body">          </div>

            <div class="row text-center">

              <div class="col-6">          <!-- Grid View -->

                <h4 class="text-primary" id="total-files">0</h4>          <div class="files-grid" id="gridViewContainer" style="display: none;">

                <small class="text-muted">Total</small>            <div class="row" id="filesGrid">

              </div>              <!-- Los archivos se cargarán aquí -->

              <div class="col-6">            </div>

                <h4 class="text-success" id="files-today">0</h4>          </div>

                <small class="text-muted">Hoy</small>

              </div>          <!-- Pagination -->

            </div>          <div class="d-flex justify-content-between align-items-center mt-4">

          </div>            <div class="pagination-info">

        </div>              <small class="text-muted">Mostrando <span id="showingCount">0</span> de <span id="totalCount">0</span> archivos</small>

      </div>            </div>

    </div>            <nav>

  </div>              <div id="paginationContainer"></div>

            </nav>

  <!-- Scripts -->          </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>        </div>

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>      </div>

  <script type="module" src="uploadControllerSimple.js"></script>    </div>

</body>  </div>

</html>
  <!-- Modal para previsualizar archivos -->
  <div class="modal fade" id="previewModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Vista Previa</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="previewContent">
          <!-- Contenido de previsualización -->
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="../../shared/utils/uiHelpers.js"></script>
  <script type="module" src="../../shared/services/store.js"></script>
  <script type="module" src="../../shared/services/apiClient.js"></script>
  <script type="module" src="uploadController.js"></script>
</body>
</html>
