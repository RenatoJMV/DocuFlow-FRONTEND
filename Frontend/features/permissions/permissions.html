<!DOCTYPE html><!DOCTYPE html><!DOCTYPE html>

<html lang="es">

<head><html lang="es"><html lang="es">

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0"><head><head>

  <title>DocuFlow - Gestión de Permisos</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <meta charset="UTF-8">  <meta charset="UTF-8">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <link rel="stylesheet" href="../../shared/styles/styles.css">  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="permissions.css">

</head>  <title>DocuFlow - Gestión de Permisos</title>  <title>Gestión de Permisos y Roles - DocuFlow</title>

<body>

  <!-- Navbar de navegación -->  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="position: sticky; top: 0; z-index: 1000;">

    <div class="container-fluid">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">  <link rel="stylesheet" href="../../shared/styles/styles.css">

      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">

        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">  <link rel="stylesheet" href="../../shared/styles/styles.css">  <link rel="stylesheet" href="permissions.css">

        DocuFlow

      </a>  <link rel="stylesheet" href="permissions.css">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

      

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"></head></head>

        <span class="navbar-toggler-icon"></span>

      </button><body><body class="modern-body">

      

      <div class="collapse navbar-collapse" id="navbarNav">  <!-- Navbar de navegación -->  <!-- Navbar será generado por JavaScript -->

        <ul class="navbar-nav me-auto">

          <li class="nav-item">  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="position: sticky; top: 0; z-index: 1000;">  <div id="navbar-container" class="container-fluid mt-4 mb-4"></div>

            <a class="nav-link" href="../dashboard/dashboard.html">

              <i class="bi bi-house-door me-1"></i>Dashboard    <div class="container-fluid">

            </a>

          </li>      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">  <div class="permissions-container">

          <li class="nav-item">

            <a class="nav-link" href="../files/upload.html">        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">    <!-- Header Section -->

              <i class="bi bi-cloud-upload me-1"></i>Subir Archivos

            </a>        DocuFlow    <div class="card-modern permissions-header">

          </li>

          <li class="nav-item">      </a>      <div class="d-flex align-items-center justify-content-between flex-wrap">

            <a class="nav-link" href="../comments/comments.html">

              <i class="bi bi-chat-dots me-1"></i>Comentarios              <div class="d-flex align-items-center gap-3">

            </a>

          </li>      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">          <div class="header-icon">

          <li class="nav-item">

            <a class="nav-link" href="../logs/logs.html">        <span class="navbar-toggler-icon"></span>            <i class="bi bi-shield-lock-fill"></i>

              <i class="bi bi-journal-text me-1"></i>Logs

            </a>      </button>          </div>

          </li>

          <li class="nav-item">                <div>

            <a class="nav-link active" href="permissions.html">

              <i class="bi bi-shield-check me-1"></i>Permisos      <div class="collapse navbar-collapse" id="navbarNav">            <h1 class="h3 mb-1 text-gray-800">Gestión de Permisos</h1>

            </a>

          </li>        <ul class="navbar-nav me-auto">            <p class="mb-0 text-gray-600">Administra roles y permisos de usuarios del sistema</p>

          <li class="nav-item">

            <a class="nav-link" href="../export/export.html">          <li class="nav-item">          </div>

              <i class="bi bi-download me-1"></i>Exportar

            </a>            <a class="nav-link" href="../dashboard/dashboard.html">        </div>

          </li>

        </ul>              <i class="bi bi-house-door me-1"></i>Dashboard        <div class="permissions-stats d-flex">

        

        <ul class="navbar-nav">            </a>          <div class="stat-item text-info">

          <li class="nav-item dropdown">

            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">          </li>            <i class="bi bi-people"></i>

              <i class="bi bi-person-circle me-1"></i>

              <span id="nav-username">Usuario</span>          <li class="nav-item">            <span id="usersCount">-</span>

            </a>

            <ul class="dropdown-menu dropdown-menu-end">            <a class="nav-link" href="../files/upload.html">            <small>Usuarios</small>

              <li><a class="dropdown-item" href="../profile/profile.html">

                <i class="bi bi-person me-2"></i>Mi Perfil              <i class="bi bi-cloud-upload me-1"></i>Subir Archivos          </div>

              </a></li>

              <li><hr class="dropdown-divider"></li>            </a>          <div class="stat-item text-warning">

              <li><a class="dropdown-item" href="#" onclick="authService.logout()">

                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión          </li>            <i class="bi bi-person-gear"></i>

              </a></li>

            </ul>          <li class="nav-item">            <span id="rolesCount">-</span>

          </li>

        </ul>            <a class="nav-link" href="../comments/comments.html">            <small>Roles</small>

      </div>

    </div>              <i class="bi bi-chat-dots me-1"></i>Comentarios          </div>

  </nav>

            </a>          <div class="stat-item text-success">

  <div class="container-fluid mt-4">

    <div class="row">          </li>            <i class="bi bi-shield-check"></i>

      <!-- Panel principal de usuarios -->

      <div class="col-lg-8">          <li class="nav-item">            <span id="permissionsCount">-</span>

        <div class="card shadow-sm">

          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">            <a class="nav-link" href="../logs/logs.html">            <small>Permisos</small>

            <h5 class="mb-0">

              <i class="bi bi-people me-2"></i>              <i class="bi bi-journal-text me-1"></i>Logs          </div>

              Usuarios y Permisos

            </h5>            </a>        </div>

            <div class="d-flex gap-2">

              <button class="btn btn-light btn-sm" onclick="refreshUsers()">          </li>      </div>

                <i class="bi bi-arrow-clockwise"></i>

              </button>          <li class="nav-item">    </div>

              <button class="btn btn-success btn-sm" onclick="showAddUserModal()">

                <i class="bi bi-person-plus me-1"></i>Agregar Usuario            <a class="nav-link active" href="permissions.html">

              </button>

            </div>              <i class="bi bi-shield-check me-1"></i>Permisos  <div class="row g-4">

          </div>

          <div class="card-body">            </a>      <!-- Users & Roles Management -->

            <!-- Filtros -->

            <div class="row mb-3">          </li>      <div class="col-lg-8">

              <div class="col-md-4">

                <div class="input-group input-group-sm">          <li class="nav-item">        <div class="card-modern users-management">

                  <span class="input-group-text"><i class="bi bi-search"></i></span>

                  <input type="text" class="form-control" id="searchUsers" placeholder="Buscar usuarios...">            <a class="nav-link" href="../export/export.html">          <div class="users-header d-flex align-items-center justify-content-between flex-wrap">

                </div>

              </div>              <i class="bi bi-download me-1"></i>Exportar            <h5 class="mb-0 text-gray-800">

              <div class="col-md-4">

                <select class="form-select form-select-sm" id="roleFilter">            </a>              <i class="bi bi-people me-2"></i>Usuarios y Roles

                  <option value="">Todos los roles</option>

                  <option value="admin">Administrador</option>          </li>            </h5>

                  <option value="editor">Editor</option>

                  <option value="user">Usuario</option>        </ul>            <div class="d-flex gap-2 align-items-center">

                </select>

              </div>                      <div class="search-box">

              <div class="col-md-4">

                <select class="form-select form-select-sm" id="statusFilter">        <ul class="navbar-nav">                <input type="text" class="form-control form-control-sm" id="searchUsers" placeholder="Buscar usuarios...">

                  <option value="">Todos los estados</option>

                  <option value="active">Activo</option>          <li class="nav-item dropdown">              </div>

                  <option value="inactive">Inactivo</option>

                </select>            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">              <button class="btn-modern btn-modern-primary btn-sm" id="addUserBtn">

              </div>

            </div>              <i class="bi bi-person-circle me-1"></i>                <i class="bi bi-person-plus me-1"></i>Agregar Usuario



            <!-- Tabla de usuarios -->              <span id="nav-username">Usuario</span>              </button>

            <div class="table-responsive">

              <table class="table table-hover">            </a>            </div>

                <thead class="table-light">

                  <tr>            <ul class="dropdown-menu dropdown-menu-end">          </div>

                    <th><i class="bi bi-person me-1"></i>Usuario</th>

                    <th><i class="bi bi-shield me-1"></i>Rol</th>              <li><a class="dropdown-item" href="../profile/profile.html">

                    <th><i class="bi bi-circle me-1"></i>Estado</th>

                    <th><i class="bi bi-calendar me-1"></i>Último Acceso</th>                <i class="bi bi-person me-2"></i>Mi Perfil          <div class="table-container">

                    <th><i class="bi bi-gear me-1"></i>Acciones</th>

                  </tr>              </a></li>            <div class="table-responsive">

                </thead>

                <tbody id="users-table">              <li><hr class="dropdown-divider"></li>              <table class="table">

                  <tr>

                    <td colspan="5" class="text-center py-4">              <li><a class="dropdown-item" href="#" onclick="authService.logout()">                <thead>

                      <div class="spinner-border text-primary" role="status">

                        <span class="visually-hidden">Cargando usuarios...</span>                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión                  <tr>

                      </div>

                      <p class="mt-2 text-muted">Cargando usuarios...</p>              </a></li>                    <th>

                    </td>

                  </tr>            </ul>                      <input type="checkbox" class="form-check-input" id="selectAll">

                </tbody>

              </table>          </li>                    </th>

            </div>

        </ul>                    <th>Usuario</th>

            <!-- Paginación -->

            <nav aria-label="Paginación de usuarios">      </div>                    <th>Email</th>

              <ul class="pagination pagination-sm justify-content-center" id="users-pagination">

                <!-- Generado dinámicamente -->    </div>                    <th>Rol Actual</th>

              </ul>

            </nav>  </nav>                    <th>Estado</th>

          </div>

        </div>                    <th>Última Conexión</th>



        <!-- Panel de roles -->  <div class="container mt-4">                    <th>Acciones</th>

        <div class="card shadow-sm mt-4">

          <div class="card-header bg-success text-white">    <div class="row">                  </tr>

            <h5 class="mb-0">

              <i class="bi bi-shield me-2"></i>      <!-- Panel de usuarios -->                </thead>

              Gestión de Roles

            </h5>      <div class="col-lg-8">                <tbody id="usersTable">

          </div>

          <div class="card-body">        <div class="card">                  <!-- Users will be rendered here -->

            <div class="row">

              <div class="col-md-4 mb-3">          <div class="card-header d-flex justify-content-between align-items-center">                </tbody>

                <div class="card border-primary h-100">

                  <div class="card-body text-center">            <h5 class="mb-0">              </table>

                    <i class="bi bi-person-badge text-primary display-4"></i>

                    <h6 class="mt-2">Administrador</h6>              <i class="bi bi-people text-primary me-2"></i>            </div>

                    <p class="text-muted small">Acceso completo al sistema</p>

                    <div class="d-grid">              Usuarios y Permisos

                      <span class="badge bg-primary">Control Total</span>

                    </div>            </h5>            <!-- Empty State -->

                    <div class="mt-2">

                      <small class="text-muted">Usuarios: <strong id="admin-users-count">2</strong></small>            <button class="btn btn-outline-primary btn-sm" onclick="refreshUsers()">            <div id="usersEmptyState" class="empty-state d-none">

                    </div>

                  </div>              <i class="bi bi-arrow-clockwise me-1"></i>Actualizar              <i class="bi bi-people display-1 text-gray-400"></i>

                </div>

              </div>            </button>              <h5 class="text-gray-600 mt-3">No hay usuarios registrados</h5>

              <div class="col-md-4 mb-3">

                <div class="card border-success h-100">          </div>              <p class="text-gray-500">Los usuarios aparecerán aquí cuando se registren</p>

                  <div class="card-body text-center">

                    <i class="bi bi-person-check text-success display-4"></i>          <div class="card-body">            </div>

                    <h6 class="mt-2">Editor</h6>

                    <p class="text-muted small">Puede editar y gestionar contenido</p>            <!-- Tabla de usuarios -->

                    <div class="d-grid">

                      <span class="badge bg-success">Edición</span>            <div class="table-responsive">            <!-- Pagination -->

                    </div>

                    <div class="mt-2">              <table class="table table-hover">            <div class="d-flex align-items-center justify-content-between mt-4">

                      <small class="text-muted">Usuarios: <strong id="editor-users-count">8</strong></small>

                    </div>                <thead>              <div class="pagination-info text-gray-600 small">

                  </div>

                </div>                  <tr>                Mostrando <span id="showingUsersCount">0</span> de <span id="totalUsersCount">0</span> usuarios

              </div>

              <div class="col-md-4 mb-3">                    <th>Usuario</th>              </div>

                <div class="card border-info h-100">

                  <div class="card-body text-center">                    <th>Rol</th>              <div id="usersPaginationContainer"></div>

                    <i class="bi bi-person text-info display-4"></i>

                    <h6 class="mt-2">Usuario</h6>                    <th>Estado</th>            </div>

                    <p class="text-muted small">Acceso básico de lectura</p>

                    <div class="d-grid">                    <th>Último Acceso</th>          </div>

                      <span class="badge bg-info">Solo Lectura</span>

                    </div>                    <th>Acciones</th>        </div>

                    <div class="mt-2">

                      <small class="text-muted">Usuarios: <strong id="user-users-count">13</strong></small>                  </tr>

                    </div>

                  </div>                </thead>        <!-- Roles Section -->

                </div>

              </div>                <tbody id="users-table">        <div class="card-modern roles-section mt-4">

            </div>

          </div>                  <tr>          <div class="roles-header d-flex align-items-center justify-content-between">

        </div>

      </div>                    <td colspan="5" class="text-center">            <h5 class="mb-0 text-gray-800">



      <!-- Panel lateral -->                      <div class="spinner-border" role="status">              <i class="bi bi-person-gear me-2"></i>Gestión de Roles

      <div class="col-lg-4">

        <!-- Estadísticas -->                        <span class="visually-hidden">Cargando usuarios...</span>            </h5>

        <div class="card shadow-sm mb-3">

          <div class="card-header bg-info text-white">                      </div>            <button class="btn-modern btn-modern-outline btn-sm" id="addRoleBtn">

            <h6 class="mb-0">

              <i class="bi bi-graph-up me-2"></i>                      <p class="mt-2 text-muted">Cargando usuarios...</p>              <i class="bi bi-plus-circle me-1"></i>Nuevo Rol

              Estadísticas

            </h6>                    </td>            </button>

          </div>

          <div class="card-body">                  </tr>          </div>

            <div class="text-center mb-3">

              <h4 class="text-primary" id="total-users">23</h4>                </tbody>

              <p class="text-muted mb-0">Total de usuarios</p>

            </div>              </table>          <div class="roles-grid" id="rolesGrid">

            <hr>

            <div class="d-flex justify-content-between mb-2">            </div>            <!-- Roles will be rendered here -->

              <span>Administradores:</span>

              <strong id="admin-count" class="text-primary">2</strong>          </div>          </div>

            </div>

            <div class="d-flex justify-content-between mb-2">        </div>        </div>

              <span>Editores:</span>

              <strong id="editor-count" class="text-success">8</strong>      </div>

            </div>

            <div class="d-flex justify-content-between mb-2">        <!-- Panel de roles -->

              <span>Usuarios:</span>

              <strong id="user-count" class="text-info">13</strong>        <div class="card mt-4">      <!-- Permission Assignment Section -->

            </div>

            <hr>          <div class="card-header">      <div class="col-lg-4">

            <div class="d-flex justify-content-between">

              <span>Activos:</span>            <h5 class="mb-0">        <div class="card-modern permission-assignment sticky-top">

              <strong id="active-count" class="text-success">21</strong>

            </div>              <i class="bi bi-shield text-success me-2"></i>          <div class="assignment-header">

          </div>

        </div>              Gestión de Roles            <h5 class="mb-0 text-gray-800">



        <!-- Actividad reciente -->            </h5>              <i class="bi bi-shield-lock me-2"></i>Asignar Permisos

        <div class="card shadow-sm mb-3">

          <div class="card-header bg-warning text-dark">          </div>            </h5>

            <h6 class="mb-0">

              <i class="bi bi-clock me-2"></i>          <div class="card-body">          </div>

              Actividad Reciente

            </h6>            <div class="row">          

          </div>

          <div class="card-body" id="recent-activity">              <div class="col-md-4">          <form id="permissionForm">

            <div class="text-center">

              <div class="spinner-border spinner-border-sm text-warning" role="status">                <div class="card border-primary">            <div class="mb-3">

                <span class="visually-hidden">Cargando...</span>

              </div>                  <div class="card-body text-center">              <label for="userSelect" class="form-label text-gray-700">Usuario</label>

              <p class="mt-2 text-muted small">Cargando actividad...</p>

            </div>                    <i class="bi bi-person-badge text-primary fs-1"></i>              <select id="userSelect" class="form-select" required>

          </div>

        </div>                    <h6 class="mt-2">Administrador</h6>                <option value="">Seleccionar usuario...</option>



        <!-- Alertas de seguridad -->                    <p class="text-muted small">Acceso completo al sistema</p>              </select>

        <div class="card shadow-sm">

          <div class="card-header bg-danger text-white">                    <div class="d-grid">            </div>

            <h6 class="mb-0">

              <i class="bi bi-shield-exclamation me-2"></i>                      <span class="badge bg-primary">Control Total</span>

              Seguridad

            </h6>                    </div>            <div class="mb-3">

          </div>

          <div class="card-body" id="security-alerts">                  </div>              <label for="roleSelect" class="form-label text-gray-700">Rol</label>

            <div class="alert alert-success alert-sm mb-2">

              <i class="bi bi-check-circle me-2"></i>                </div>              <select id="roleSelect" class="form-select" required>

              <small>Sistema seguro</small>

            </div>              </div>                <option value="">Seleccionar rol...</option>

            <div class="alert alert-info alert-sm mb-0">

              <i class="bi bi-info-circle me-2"></i>              <div class="col-md-4">              </select>

              <small>Sin intentos de acceso fallidos</small>

            </div>                <div class="card border-success">            </div>

          </div>

        </div>                  <div class="card-body text-center">

      </div>

    </div>                    <i class="bi bi-person-check text-success fs-1"></i>            <div class="mb-3">

  </div>

                    <h6 class="mt-2">Editor</h6>              <label class="form-label text-gray-700">Permisos Específicos</label>

  <!-- Modal para agregar usuario -->

  <div class="modal fade" id="addUserModal" tabindex="-1">                    <p class="text-muted small">Puede editar y gestionar contenido</p>              <div class="permissions-list" id="permissionsList">

    <div class="modal-dialog">

      <div class="modal-content">                    <div class="d-grid">                <!-- Permissions checkboxes will be rendered here -->

        <div class="modal-header">

          <h5 class="modal-title">                      <span class="badge bg-success">Edición</span>              </div>

            <i class="bi bi-person-plus me-2"></i>Agregar Usuario

          </h5>                    </div>            </div>

          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

        </div>                  </div>

        <div class="modal-body">

          <form id="add-user-form">                </div>            <div class="permission-preview mb-3" id="permissionPreview" style="display: none;">

            <div class="mb-3">

              <label for="user-email" class="form-label">Email</label>              </div>              <label class="form-label text-gray-700">Vista Previa de Permisos</label>

              <input type="email" class="form-control" id="user-email" required>

            </div>              <div class="col-md-4">              <div class="preview-content">

            <div class="mb-3">

              <label for="user-name" class="form-label">Nombre completo</label>                <div class="card border-info">                <!-- Permission preview will be shown here -->

              <input type="text" class="form-control" id="user-name" required>

            </div>                  <div class="card-body text-center">              </div>

            <div class="mb-3">

              <label for="user-role" class="form-label">Rol</label>                    <i class="bi bi-person text-info fs-1"></i>            </div>

              <select class="form-select" id="user-role" required>

                <option value="">Seleccionar rol...</option>                    <h6 class="mt-2">Usuario</h6>

                <option value="admin">Administrador</option>

                <option value="editor">Editor</option>                    <p class="text-muted small">Acceso básico de lectura</p>            <button type="submit" class="btn-modern btn-modern-primary w-100" id="savePermissionsBtn">

                <option value="user">Usuario</option>

              </select>                    <div class="d-grid">              <i class="bi bi-shield-check me-2"></i>Guardar Permisos

            </div>

            <div class="mb-3">                      <span class="badge bg-info">Solo Lectura</span>            </button>

              <label for="user-password" class="form-label">Contraseña temporal</label>

              <input type="password" class="form-control" id="user-password" required>                    </div>          </form>

            </div>

          </form>                  </div>        </div>

        </div>

        <div class="modal-footer">                </div>

          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

          <button type="button" class="btn btn-success" onclick="addUser()">              </div>        <!-- Quick Actions -->

            <i class="bi bi-plus me-1"></i>Agregar Usuario

          </button>            </div>        <div class="card-modern mt-3">

        </div>

      </div>          </div>          <h6 class="text-gray-700 mb-3">Acciones Rápidas</h6>

    </div>

  </div>        </div>          <div class="quick-actions">



  <!-- Scripts -->      </div>            <button class="btn-modern btn-modern-outline w-100 mb-2" id="exportPermissions">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>              <i class="bi bi-download me-2"></i>Exportar Permisos

  <script type="module" src="permissionsController.js"></script>

</body>      <!-- Panel lateral -->            </button>

</html>
      <div class="col-lg-4">            <button class="btn-modern btn-modern-outline w-100 mb-2" id="importPermissions">

        <!-- Agregar usuario -->              <i class="bi bi-upload me-2"></i>Importar Permisos

        <div class="card">            </button>

          <div class="card-header">            <button class="btn-modern btn-modern-outline w-100" id="refreshPermissions">

            <h6 class="mb-0">              <i class="bi bi-arrow-clockwise me-2"></i>Actualizar

              <i class="bi bi-person-plus text-success me-2"></i>            </button>

              Agregar Usuario          </div>

            </h6>        </div>

          </div>

          <div class="card-body">        <!-- Permission Templates -->

            <form id="add-user-form">        <div class="card-modern mt-3">

              <div class="mb-3">          <h6 class="text-gray-700 mb-3">Plantillas de Permisos</h6>

                <label for="user-email" class="form-label">Email</label>          <div class="permission-templates">

                <input type="email" class="form-control" id="user-email" required>            <div class="template-item" data-template="admin">

              </div>              <i class="bi bi-person-fill-gear"></i>

              <div class="mb-3">              <span>Administrador</span>

                <label for="user-name" class="form-label">Nombre</label>            </div>

                <input type="text" class="form-control" id="user-name" required>            <div class="template-item" data-template="editor">

              </div>              <i class="bi bi-pencil-square"></i>

              <div class="mb-3">              <span>Editor</span>

                <label for="user-role" class="form-label">Rol</label>            </div>

                <select class="form-select" id="user-role" required>            <div class="template-item" data-template="viewer">

                  <option value="">Seleccionar rol...</option>              <i class="bi bi-eye"></i>

                  <option value="admin">Administrador</option>              <span>Visualizador</span>

                  <option value="editor">Editor</option>            </div>

                  <option value="user">Usuario</option>            <div class="template-item" data-template="guest">

                </select>              <i class="bi bi-person"></i>

              </div>              <span>Invitado</span>

              <button type="submit" class="btn btn-success w-100">            </div>

                <i class="bi bi-plus me-1"></i>Agregar Usuario          </div>

              </button>        </div>

            </form>      </div>

          </div>    </div>

        </div>

    <!-- Messages -->

        <!-- Estadísticas -->    <div id="permissionMessage" class="alert d-none mt-3"></div>

        <div class="card mt-3">  </div>

          <div class="card-header">

            <h6 class="mb-0">  <!-- Modals -->

              <i class="bi bi-graph-up text-info me-2"></i>  <!-- Add User Modal -->

              Estadísticas  <div class="modal fade" id="addUserModal" tabindex="-1">

            </h6>    <div class="modal-dialog">

          </div>      <div class="modal-content">

          <div class="card-body">        <div class="modal-header">

            <div class="mb-3">          <h5 class="modal-title">Agregar Nuevo Usuario</h5>

              <div class="d-flex justify-content-between">          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

                <span>Total Usuarios:</span>        </div>

                <strong id="total-users">0</strong>        <div class="modal-body">

              </div>          <form id="addUserForm">

            </div>            <div class="mb-3">

            <div class="mb-3">              <label for="userName" class="form-label">Nombre de Usuario</label>

              <div class="d-flex justify-content-between">              <input type="text" class="form-control" id="userName" required>

                <span>Administradores:</span>            </div>

                <strong id="admin-count" class="text-primary">0</strong>            <div class="mb-3">

              </div>              <label for="userEmail" class="form-label">Email</label>

            </div>              <input type="email" class="form-control" id="userEmail" required>

            <div class="mb-3">            </div>

              <div class="d-flex justify-content-between">            <div class="mb-3">

                <span>Editores:</span>              <label for="userRole" class="form-label">Rol Inicial</label>

                <strong id="editor-count" class="text-success">0</strong>              <select id="userRole" class="form-select" required>

              </div>                <option value="">Seleccionar rol...</option>

            </div>              </select>

            <div class="mb-3">            </div>

              <div class="d-flex justify-content-between">          </form>

                <span>Usuarios:</span>        </div>

                <strong id="user-count" class="text-info">0</strong>        <div class="modal-footer">

              </div>          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

            </div>          <button type="button" class="btn btn-primary" id="saveUserBtn">Guardar Usuario</button>

            <div>        </div>

              <div class="d-flex justify-content-between">      </div>

                <span>Activos:</span>    </div>

                <strong id="active-count" class="text-success">0</strong>  </div>

              </div>

            </div>  <!-- Add Role Modal -->

          </div>  <div class="modal fade" id="addRoleModal" tabindex="-1">

        </div>    <div class="modal-dialog">

      <div class="modal-content">

        <!-- Actividad reciente -->        <div class="modal-header">

        <div class="card mt-3">          <h5 class="modal-title">Crear Nuevo Rol</h5>

          <div class="card-header">          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>

            <h6 class="mb-0">        </div>

              <i class="bi bi-clock text-warning me-2"></i>        <div class="modal-body">

              Actividad Reciente          <form id="addRoleForm">

            </h6>            <div class="mb-3">

          </div>              <label for="roleName" class="form-label">Nombre del Rol</label>

          <div class="card-body">              <input type="text" class="form-control" id="roleName" required>

            <div id="recent-activity">            </div>

              <div class="text-center">            <div class="mb-3">

                <div class="spinner-border spinner-border-sm" role="status">              <label for="roleDescription" class="form-label">Descripción</label>

                  <span class="visually-hidden">Cargando...</span>              <textarea class="form-control" id="roleDescription" rows="3"></textarea>

                </div>            </div>

                <p class="mt-2 text-muted small">Cargando actividad...</p>            <div class="mb-3">

              </div>              <label class="form-label">Permisos del Rol</label>

            </div>              <div id="rolePermissionsList">

          </div>                <!-- Role permissions will be rendered here -->

        </div>              </div>

      </div>            </div>

    </div>          </form>

  </div>        </div>

        <div class="modal-footer">

  <!-- Scripts -->          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>          <button type="button" class="btn btn-primary" id="saveRoleBtn">Guardar Rol</button>

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>        </div>

  <script type="module" src="permissionsControllerSimple.js"></script>      </div>

</body>    </div>

</html>  </div>

  <script type="module" src="permissionsController.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
