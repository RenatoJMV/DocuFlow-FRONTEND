<!DOCTYPE html><!DOCTYPE html>

<html lang="es"><html lang="es">

<head><head>

  <meta charset="UTF-8">  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>DocuFlow - Logs del Sistema</title>  <title>Logs del Sistema - DocuFlow</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">  <link rel="stylesheet" href="../../shared/styles/styles.css">

  <link rel="stylesheet" href="../../shared/styles/styles.css">  <link rel="stylesheet" href="logs.css">

  <link rel="stylesheet" href="logs.css">  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head></head>

<body><body class="modern-body">

  <!-- Navbar de navegación -->  <!-- Navbar será generado por JavaScript -->

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="position: sticky; top: 0; z-index: 1000;">  <div id="navbar-container" class="container-fluid mt-4 mb-4"></div>

    <div class="container-fluid">

      <a class="navbar-brand d-flex align-items-center" href="../dashboard/dashboard.html">  <div class="logs-container">

        <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="DocuFlow" width="30" height="30" class="me-2">    <!-- Header Section -->

        DocuFlow    <div class="card-modern logs-header">

      </a>      <div class="d-flex align-items-center justify-content-between flex-wrap">

              <div class="d-flex align-items-center gap-3">

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">          <div class="header-icon">

        <span class="navbar-toggler-icon"></span>            <i class="bi bi-activity"></i>

      </button>          </div>

                <div>

      <div class="collapse navbar-collapse" id="navbarNav">            <h1 class="h3 mb-1 text-gray-800">Logs del Sistema</h1>

        <ul class="navbar-nav me-auto">            <p class="mb-0 text-gray-600">Monitoreo y seguimiento de actividades del sistema</p>

          <li class="nav-item">          </div>

            <a class="nav-link" href="../dashboard/dashboard.html">        </div>

              <i class="bi bi-house-door me-1"></i>Dashboard        <div class="logs-stats d-flex">

            </a>          <div class="stat-item text-info">

          </li>            <i class="bi bi-clock-history"></i>

          <li class="nav-item">            <span id="todayLogsCount">-</span>

            <a class="nav-link" href="../files/upload.html">            <small>Hoy</small>

              <i class="bi bi-cloud-upload me-1"></i>Subir Archivos          </div>

            </a>          <div class="stat-item text-warning">

          </li>            <i class="bi bi-exclamation-triangle"></i>

          <li class="nav-item">            <span id="errorsCount">-</span>

            <a class="nav-link" href="../comments/comments.html">            <small>Errores</small>

              <i class="bi bi-chat-dots me-1"></i>Comentarios          </div>

            </a>          <div class="stat-item text-success">

          </li>            <i class="bi bi-check-circle"></i>

          <li class="nav-item">            <span id="successCount">-</span>

            <a class="nav-link active" href="logs.html">            <small>Exitosos</small>

              <i class="bi bi-journal-text me-1"></i>Logs          </div>

            </a>        </div>

          </li>      </div>

          <li class="nav-item">    </div>

            <a class="nav-link" href="../permissions/permissions.html">

              <i class="bi bi-shield-check me-1"></i>Permisos  <div class="row g-4">

            </a>      <!-- Logs Table Section -->

          </li>      <div class="col-lg-9">

          <li class="nav-item">        <div class="card-modern logs-table-section">

            <a class="nav-link" href="../export/export.html">          <div class="logs-table-header d-flex align-items-center justify-content-between flex-wrap">

              <i class="bi bi-download me-1"></i>Exportar            <h5 class="mb-0 text-gray-800">

            </a>              <i class="bi bi-list-ul me-2"></i>Historial de Actividades

          </li>            </h5>

        </ul>            <div class="d-flex gap-2 align-items-center">

                      <button class="btn-modern btn-modern-outline btn-sm" id="refreshLogs">

        <ul class="navbar-nav">                <i class="bi bi-arrow-clockwise me-1"></i>Actualizar

          <li class="nav-item dropdown">              </button>

            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">              <button class="btn-modern btn-modern-primary btn-sm" id="downloadLogs">

              <i class="bi bi-person-circle me-1"></i>                <i class="bi bi-download me-1"></i>Exportar

              <span id="nav-username">Usuario</span>              </button>

            </a>            </div>

            <ul class="dropdown-menu dropdown-menu-end">          </div>

              <li><a class="dropdown-item" href="../profile/profile.html">

                <i class="bi bi-person me-2"></i>Mi Perfil          <!-- Filters Section -->

              </a></li>          <div class="logs-filters">

              <li><hr class="dropdown-divider"></li>            <div class="row g-3">

              <li><a class="dropdown-item" href="#" onclick="authService.logout()">              <div class="col-md-3">

                <i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión                <label class="form-label text-gray-700">Fecha</label>

              </a></li>                <div class="input-group">

            </ul>                  <input type="date" id="filterDate" class="form-control form-control-sm">

          </li>                  <button class="btn btn-outline-secondary btn-sm" type="button" id="clearDate">

        </ul>                    <i class="bi bi-x"></i>

      </div>                  </button>

    </div>                </div>

  </nav>              </div>

              <div class="col-md-3">

  <div class="container mt-4">                <label class="form-label text-gray-700">Usuario</label>

    <div class="row">                <div class="search-box">

      <div class="col-12">                  <input type="text" id="filterUser" class="form-control form-control-sm" placeholder="Buscar usuario...">

        <div class="card">                </div>

          <div class="card-header d-flex justify-content-between align-items-center">              </div>

            <h5 class="mb-0">              <div class="col-md-3">

              <i class="bi bi-journal-text text-primary me-2"></i>                <label class="form-label text-gray-700">Acción</label>

              Logs del Sistema                <select id="filterAction" class="form-select form-select-sm">

            </h5>                  <option value="">Todas las acciones</option>

            <div class="d-flex gap-2">                  <option value="login">Inicio de sesión</option>

              <select class="form-select form-select-sm" id="logLevelFilter" style="width: auto;">                  <option value="upload">Subida de archivo</option>

                <option value="">Todos los niveles</option>                  <option value="download">Descarga</option>

                <option value="info">Info</option>                  <option value="delete">Eliminación</option>

                <option value="warning">Advertencia</option>                  <option value="comment">Comentario</option>

                <option value="error">Error</option>                  <option value="permission">Permisos</option>

                <option value="success">Éxito</option>                  <option value="error">Error del sistema</option>

              </select>                </select>

              <button class="btn btn-outline-primary btn-sm" onclick="refreshLogs()">              </div>

                <i class="bi bi-arrow-clockwise me-1"></i>Actualizar              <div class="col-md-3">

              </button>                <label class="form-label text-gray-700">Nivel</label>

              <button class="btn btn-outline-danger btn-sm" onclick="clearLogs()">                <select id="filterLevel" class="form-select form-select-sm">

                <i class="bi bi-trash me-1"></i>Limpiar                  <option value="">Todos los niveles</option>

              </button>                  <option value="info">Información</option>

            </div>                  <option value="warning">Advertencia</option>

          </div>                  <option value="error">Error</option>

          <div class="card-body">                  <option value="success">Éxito</option>

            <div id="logs-container">                </select>

              <div class="text-center">              </div>

                <div class="spinner-border" role="status">            </div>

                  <span class="visually-hidden">Cargando logs...</span>            <div class="filter-actions mt-3">

                </div>              <button class="btn-modern btn-modern-outline btn-sm" id="clearAllFilters">

                <p class="mt-2 text-muted">Cargando logs del sistema...</p>                <i class="bi bi-funnel me-1"></i>Limpiar Filtros

              </div>              </button>

            </div>              <button class="btn-modern btn-modern-outline btn-sm" id="applyFilters">

          </div>                <i class="bi bi-search me-1"></i>Aplicar Filtros

        </div>              </button>

      </div>            </div>

    </div>          </div>



    <!-- Estadísticas de logs -->          <!-- Logs Table -->

    <div class="row mt-4">          <div class="table-container">

      <div class="col-md-3">            <div class="table-responsive">

        <div class="card text-center">              <table class="table" id="logsTable">

          <div class="card-body">                <thead>

            <i class="bi bi-info-circle text-info fs-1"></i>                  <tr>

            <h5 class="mt-2" id="info-count">0</h5>                    <th>

            <p class="card-text text-muted">Info</p>                      <input type="checkbox" class="form-check-input" id="selectAllLogs">

          </div>                    </th>

        </div>                    <th>Fecha y Hora</th>

      </div>                    <th>Nivel</th>

      <div class="col-md-3">                    <th>Acción</th>

        <div class="card text-center">                    <th>Usuario</th>

          <div class="card-body">                    <th>Detalles</th>

            <i class="bi bi-exclamation-triangle text-warning fs-1"></i>                    <th>IP</th>

            <h5 class="mt-2" id="warning-count">0</h5>                    <th>Acciones</th>

            <p class="card-text text-muted">Advertencias</p>                  </tr>

          </div>                </thead>

        </div>                <tbody id="logsTableBody">

      </div>                  <!-- Logs will be rendered here -->

      <div class="col-md-3">                </tbody>

        <div class="card text-center">              </table>

          <div class="card-body">            </div>

            <i class="bi bi-x-circle text-danger fs-1"></i>

            <h5 class="mt-2" id="error-count">0</h5>            <!-- Empty State -->

            <p class="card-text text-muted">Errores</p>            <div id="logsEmptyState" class="empty-state d-none">

          </div>              <i class="bi bi-activity display-1 text-gray-400"></i>

        </div>              <h5 class="text-gray-600 mt-3">No hay logs disponibles</h5>

      </div>              <p class="text-gray-500">Los logs de actividad aparecerán aquí</p>

      <div class="col-md-3">            </div>

        <div class="card text-center">

          <div class="card-body">            <!-- Pagination -->

            <i class="bi bi-check-circle text-success fs-1"></i>            <div class="d-flex align-items-center justify-content-between mt-4">

            <h5 class="mt-2" id="success-count">0</h5>              <div class="pagination-info text-gray-600 small">

            <p class="card-text text-muted">Éxitos</p>                Mostrando <span id="showingLogsCount">0</span> de <span id="totalLogsCount">0</span> registros

          </div>              </div>

        </div>              <div id="logsPaginationContainer"></div>

      </div>            </div>

    </div>          </div>

  </div>        </div>

      </div>

  <!-- Scripts -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>      <!-- Log Details & Analytics -->

  <script type="module" src="../../shared/utils/uiHelpers.js"></script>      <div class="col-lg-3">

  <script type="module" src="logsControllerSimple.js"></script>        <!-- Log Details Panel -->

</body>        <div class="card-modern log-details sticky-top">

</html>          <div class="details-header">
            <h5 class="mb-0 text-gray-800">
              <i class="bi bi-info-circle me-2"></i>Detalles del Log
            </h5>
          </div>
          
          <div id="logDetailsContent">
            <div class="empty-details">
              <i class="bi bi-mouse2 text-gray-400 mb-2"></i>
              <p class="text-gray-500 small">Selecciona un log para ver los detalles</p>
            </div>
          </div>

          <div id="logDetails" class="log-details-content d-none">
            <div class="detail-item">
              <label class="detail-label">ID:</label>
              <span class="detail-value" id="detailId">-</span>
            </div>
            <div class="detail-item">
              <label class="detail-label">Timestamp:</label>
              <span class="detail-value" id="detailTimestamp">-</span>
            </div>
            <div class="detail-item">
              <label class="detail-label">Usuario:</label>
              <span class="detail-value" id="detailUser">-</span>
            </div>
            <div class="detail-item">
              <label class="detail-label">IP:</label>
              <span class="detail-value" id="detailIp">-</span>
            </div>
            <div class="detail-item">
              <label class="detail-label">User Agent:</label>
              <span class="detail-value small" id="detailUserAgent">-</span>
            </div>
            <div class="detail-item">
              <label class="detail-label">Detalles:</label>
              <div class="detail-value" id="detailMessage">-</div>
            </div>
          </div>
        </div>

        <!-- Quick Analytics -->
        <div class="card-modern mt-3">
          <h6 class="text-gray-700 mb-3">Análisis Rápido</h6>
          <div class="analytics-grid">
            <div class="analytics-item">
              <div class="analytics-icon text-info">
                <i class="bi bi-person-check"></i>
              </div>
              <div>
                <div class="analytics-value" id="uniqueUsers">-</div>
                <div class="analytics-label">Usuarios Únicos</div>
              </div>
            </div>
            <div class="analytics-item">
              <div class="analytics-icon text-success">
                <i class="bi bi-arrow-up-circle"></i>
              </div>
              <div>
                <div class="analytics-value" id="uploadsCount">-</div>
                <div class="analytics-label">Subidas</div>
              </div>
            </div>
            <div class="analytics-item">
              <div class="analytics-icon text-warning">
                <i class="bi bi-arrow-down-circle"></i>
              </div>
              <div>
                <div class="analytics-value" id="downloadsCount">-</div>
                <div class="analytics-label">Descargas</div>
              </div>
            </div>
            <div class="analytics-item">
              <div class="analytics-icon text-danger">
                <i class="bi bi-exclamation-triangle"></i>
              </div>
              <div>
                <div class="analytics-value" id="errorsToday">-</div>
                <div class="analytics-label">Errores Hoy</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="card-modern mt-3">
          <h6 class="text-gray-700 mb-3">Acciones Rápidas</h6>
          <div class="quick-actions">
            <button class="btn-modern btn-modern-outline w-100 mb-2" id="clearOldLogs">
              <i class="bi bi-trash me-2"></i>Limpiar Logs Antiguos
            </button>
            <button class="btn-modern btn-modern-outline w-100 mb-2" id="exportAnalytics">
              <i class="bi bi-bar-chart me-2"></i>Exportar Análisis
            </button>
            <button class="btn-modern btn-modern-outline w-100" id="systemHealth">
              <i class="bi bi-heart-pulse me-2"></i>Estado del Sistema
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="logsController.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
